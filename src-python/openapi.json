{"openapi": "3.1.0", "info": {"title": "Nougat OCR API", "description": "OCR tool using the Nougat model", "version": "1.0.0"}, "paths": {"/ocr": {"post": {"tags": ["ocr"], "summary": "Perform OCR on an image or PDF", "operationId": "ocr-ocr", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/OCRRequest"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"text/plain": {"schema": {"type": "string"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/health": {"get": {"tags": ["health"], "summary": "Health check endpoint", "operationId": "health-health", "responses": {"200": {"description": "Successful Response", "content": {"text/plain": {"schema": {"type": "string"}}}}}}}, "/shutdown": {"get": {"tags": ["shutdown"], "summary": "Shutdown endpoint", "operationId": "shutdown-shutdown", "responses": {"200": {"description": "Successful Response", "content": {"text/plain": {"schema": {"type": "string"}}}}}}}, "/logs": {"get": {"tags": ["logs"], "summary": "Get current log file contents", "operationId": "logs-get_logs", "responses": {"200": {"description": "Successful Response", "content": {"text/plain": {"schema": {"type": "string"}}}}}}}}, "components": {"schemas": {"HTTPValidationError": {"properties": {"detail": {"items": {"$ref": "#/components/schemas/ValidationError"}, "type": "array", "title": "Detail"}}, "type": "object", "title": "HTTPValidationError"}, "OCRRequest": {"properties": {"filename": {"type": "string", "title": "Filename", "description": "Filename or image URL or base64 data URI", "default": ""}, "type": {"type": "string", "title": "Type", "description": "Type of OCR model (nougat or vlm)", "default": "nougat"}, "vlm_config": {"anyOf": [{"$ref": "#/components/schemas/VLMConfigRequest"}, {"type": "null"}]}, "model": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Model", "description": "Model name or path (for Nougat)", "default": "facebook/nougat-small", "examples": ["facebook/nougat-small", "facebook/nougat-large"]}, "temperature": {"anyOf": [{"type": "number", "maximum": 1.0, "minimum": 0.0}, {"type": "null"}], "title": "Temperature", "description": "Sampling temperature (for Nougat)", "default": 0.0}, "top_p": {"anyOf": [{"type": "number", "maximum": 1.0, "minimum": 0.0}, {"type": "null"}], "title": "Top P", "description": "Top-p sampling threshold (for Nougat)", "default": 0.0}, "repetition_penalty": {"anyOf": [{"type": "number", "minimum": 1.0}, {"type": "null"}], "title": "Repetition Penalty", "description": "Repetition penalty (for Nougat)"}, "padding": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Padding", "description": "Padding (for Nougat)"}}, "type": "object", "title": "OCRRequest"}, "VLMConfigRequest": {"properties": {"model_name": {"type": "string", "title": "Model Name", "default": "gpt-4-vision-preview"}, "api_key": {"type": "string", "title": "Api Key"}, "base_url": {"type": "string", "title": "Base Url", "default": "https://api.openai.com/v1"}, "system_prompt": {"type": "string", "title": "System Prompt", "default": "Describe the image."}, "max_tokens": {"type": "integer", "title": "Max Tokens", "default": 300}, "temperature": {"type": "number", "title": "Temperature", "default": 0.7}}, "type": "object", "required": ["api_key"], "title": "VLMConfigRequest"}, "ValidationError": {"properties": {"loc": {"items": {"anyOf": [{"type": "string"}, {"type": "integer"}]}, "type": "array", "title": "Location"}, "msg": {"type": "string", "title": "Message"}, "type": {"type": "string", "title": "Error Type"}}, "type": "object", "required": ["loc", "msg", "type"], "title": "ValidationError"}}}}